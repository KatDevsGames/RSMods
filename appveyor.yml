# configuration for "Future" branch
-
  branches:
    only:
    - Future
  image: Visual Studio 2019
  configuration: Release
  build:
      parallel: true
      verbosity: quiet
  on_finish:
  - cmd: >-
       7z a DLL.zip %APPVEYOR_BUILD_FOLDER%\Release\D3DX9_42.dll

       appveyor PushArtifact DLL.zip
     
# configuration for "GUI" branch
-
  branches:
    only:
      - GUI
  image: Visual Studio 2019
  configuration: Release
  build:
    parallel: true
    verbosity: quiet
  on_finish:
  - cmd: >-
       7z a RSMods.zip %APPVEYOR_BUILD_FOLDER%\RSMods\bin\Release\*.* -r
     
       appveyor PushArtifact RSMods.zip
      
# configuration for "One-Click-Installer" branch      
-
  branches:
    only:
      - One-Click-Installer
  image: Visual Studio 2019
  configuration: Release
  before_build:
    - cmd: >-
        rmdir -rf %APPVEYOR_BUILD_FOLDER%\Rocksmith2014-CDLC-Injector\Resources\RSModsGUI
        
        del /f %APPVEYOR_BUILD_FOLDER%\Rocksmith2014-CDLC-Injector\Resources\D3DX9_42.dll
        
        appveyor DownloadFile https://ci.appveyor.com/api/projects/Lovrom8/rscdlcenabler-2020edition/artifacts/RSMods.zip?branch=GUI
        
        appveyor DownloadFile https://ci.appveyor.com/api/projects/Lovrom8/rscdlcenabler-2020edition/artifacts/DLL.zip?branch=Future
     
        7z x RSMods.zip -o*%APPVEYOR_BUILD_FOLDER%\Rocksmith2014-CDLC-Injector\Resources\RSModsGUI
        
        7z x DLL.zip %APPVEYOR_BUILD_FOLDER%\Rocksmith2014-CDLC-Injector\Resources\
  build:
    parallel: true
    verbosity: quiet
  artifacts:
  - path: '**\*.exe'
    name: OneClick_Release
